<div class="container py-5">
  <h2 class="mb-4">Editor di Articoli</h2>

  <form [formGroup]="articleForm" (submit)="publishArticle()">
    <div class="mb-3">
      <label for="articleTitle" class="form-label">Titolo Articolo:</label>
      <input
        type="text"
        id="articleTitle"
        class="form-control"
        formControlName="articleTitle"
      />
      <div
        *ngIf="
          articleTitleControl.hasError('required') &&
          articleTitleControl.touched
        "
        class="text-danger"
      >
        Il titolo è obbligatorio.
      </div>
    </div>

    <div class="row mb-3">
      <div class="col">
        <label for="publishDate" class="form-label"
          >Data di Pubblicazione:</label
        >
        <input
          type="date"
          id="publishDate"
          class="form-control"
          formControlName="publishDate"
        />
        <div
          *ngIf="
            publishDateControl.hasError('required') &&
            publishDateControl.touched
          "
          class="text-danger"
        >
          La data di pubblicazione è obbligatoria.
        </div>
      </div>

      <div class="col">
        <label for="genre" class="form-label">Genere:</label>
        <input
          type="text"
          id="genre"
          class="form-control"
          formControlName="genre"
        />
        <div
          *ngIf="genreControl.hasError('required') && genreControl.touched"
          class="text-danger"
        >
          Il genere è obbligatorio.
        </div>
      </div>
    </div>

    <div class="mb-3">
      <label for="author" class="form-label">Autore:</label>
      <input
        type="text"
        id="author"
        class="form-control"
        formControlName="author"
      />
    </div>

    <div class="mb-3">
      <label for="propicUrl" class="form-label">URL dell'immagine:</label>
      <input
        type="file"
        id="propicUrl"
        class="form-control"
        formControlName="propicUrl"
        (change)="getFile($event)"
      />
      <p *ngIf="articleForm.get('file')!.value">
        {{ articleForm.get("file")!.value.name }}
      </p>
      <div
        *ngIf="
          propicUrlControl.hasError('required') && propicUrlControl.touched
        "
        class="text-danger"
      >
        L'URL dell'immagine è obbligatorio.
      </div>
    </div>

    <div class="mb-3">
      <label for="articleContent" class="form-label"
        >Contenuto dell'Articolo:</label
      >
      <quill-editor formControlName="articleContent"></quill-editor>
      <div
        *ngIf="
          articleContentControl.hasError('required') &&
          articleContentControl.touched
        "
        class="text-danger"
      >
        Il contenuto dell'articolo è obbligatorio.
      </div>
    </div>

    <div class="d-flex justify-content-between align-items-center mt-2">
      <button class="btn btn-primary" type="button" (click)="resetArticle()">
        Reset Articolo
      </button>

      <div>
        <button
          class="btn btn-primary me-1"
          (click)="previewArticle()"
          [disabled]="articleForm.invalid"
        >
          Anteprima
        </button>
        <button
          class="btn btn-primary"
          type="button"
          (click)="publishArticle()"
          [disabled]="articleForm.invalid"
        >
          Pubblica
        </button>
      </div>
    </div>
  </form>
</div>
